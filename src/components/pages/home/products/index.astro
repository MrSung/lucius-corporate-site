---
import PageSection from '@src/components/molecules/page-section'

import Product from './product/index.astro'
import { products } from './data'

const response = await fetch(import.meta.env.CONTENT_API_URL as string, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    query: `
        query MyQuery {
          products {
            id
            locale
            name
            createdAt
            updatedAt
            image {
              createdAt
              url
              handle
              fileName
              width
              height
            }
            spec {
              raw
            }
          }
        }
      `
  })
})
const json = await response.json()

console.log('ðŸš€ ~ file: index.astro ~ line 37 ~ json', json)
---

{JSON.stringify(json)}

<PageSection
  id='products'
  title='Products'
  additionalClassList={['py-8', 'lg:py-16']}
>
  {products.map((props) => <Product {...props} />)}
</PageSection>
